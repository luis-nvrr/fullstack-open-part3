{"version":3,"sources":["Filter.js","PersonForm.js","Person.js","PersonsList.js","services/persons.js","Notification.js","App.js","index.js"],"names":["Filter","value","onChange","onBlur","PersonForm","props","onSubmit","nameValue","nameOnChange","numberValue","numberOnChange","type","Person","name","number","id","onDelete","onClick","PersonsList","personsArray","map","person","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","notificationType","className","App","useState","persons","setPersons","results","setResults","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setMessage","setNotificationType","useEffect","personService","filterPersons","searched","filterPersonsByName","toLowerCase","includes","createPerson","createdPerson","concat","successfulCreateMessage","catch","error","unsuccessfulCreateMessage","findPersonById","find","updatePerson","oldPerson","findPersonByName","newPerson","updatedPerson","successfulUpdateMessage","unsuccessfulUpdateMessage","updateLocalMemory","resetMessage","setTimeout","successfulRemoveMessage","unsuccessfulRemoveMessage","clearInput","clearFilter","isNameRepeated","findIndex","event","target","preventDefault","alert","window","confirm","removedPerson","ReactDOM","render","document","getElementById"],"mappings":"4LAWeA,EATA,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,OACjC,OACE,qDAEE,uBAAOF,MAAOA,EAAOC,SAAUA,EAAUC,OAAQA,QCgBxCC,EApBI,SAACC,GAAW,IAAD,iBAEvBA,GADGC,EADoB,EACpBA,SAAUC,EADU,EACVA,UAAWC,EADD,EACCA,aAAcC,EADf,EACeA,YAAaC,EAD5B,EAC4BA,eAIxD,OACE,uBAAMJ,SAAUA,EAAhB,UACE,yCACQ,uBAAOL,MAAOM,EAAWL,SAAUM,OAE3C,2CACU,uBAAOP,MAAOQ,EAAaP,SAAUQ,OAE/C,8BACE,wBAAQC,KAAK,SAAb,uBCNOC,EARA,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,KAAMC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,GAAIC,EAAe,EAAfA,SAClC,OACE,gCACGH,EADH,IACUC,EADV,IACkB,wBAAQG,QAASD,EAASD,GAA1B,wBCcPG,EAhBK,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,aAAcH,EAAe,EAAfA,SACnC,OACE,8BACGG,EAAaC,KAAI,SAACC,GAAD,OAChB,cAAC,EAAD,CACER,KAAMQ,EAAOR,KACbC,OAAQO,EAAOP,OAEfC,GAAIM,EAAON,GACXC,SAAUA,GAFLK,EAAOR,Y,gBCThBS,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkB9B,EAfA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAa9B,EAVA,SAACZ,EAAIa,GAElB,OADgBL,IAAMO,IAAN,UAAaR,EAAb,YAAwBP,GAAMa,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQ9B,EALA,SAACZ,GAEd,OADgBQ,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BP,IAC5BU,MAAK,SAACC,GAAD,OAAcA,EAASC,SCN9BK,EAZM,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,iBAC7B,OAAgB,OAAZD,EACK,KAIP,qBAAKE,UAAWD,EAAhB,SACGD,KC0NMG,EA5NH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEcF,mBAAS,IAFvB,mBAETG,EAFS,KAEAC,EAFA,OAGcJ,mBAAS,IAHvB,mBAGTK,EAHS,KAGAC,EAHA,OAIkBN,mBAAS,IAJ3B,mBAITO,EAJS,KAIEC,EAJF,OAKYR,mBAAS,IALrB,mBAKTS,EALS,KAKDC,EALC,OAMcV,mBAAS,MANvB,mBAMTJ,EANS,KAMAe,EANA,OAOgCX,mBAAS,IAPzC,mBAOTH,EAPS,KAOSe,EAPT,KAShBC,qBAAU,WACRC,IAAuB1B,MAAK,SAACC,GAC3Ba,EAAWb,QAEZ,IAEH,IAeM0B,EAAgB,SAACC,GACrBZ,EAAWa,EAAoBD,KAG3BC,EAAsB,SAACzC,GAC3B,OAAOyB,EAAQQ,QAAO,SAACzB,GAAD,OACpBA,EAAOR,KAAK0C,cAAcC,SAAS3C,EAAK0C,mBA2BtCE,EAAe,WAMnBN,EALe,CACbtC,KAAM6B,EACN5B,OAAQ8B,IAKPnB,MAAK,SAACiC,GACLnB,EAAWD,EAAQqB,OAAOD,IAC1BE,OAEDC,OAAM,SAACC,GACNC,EAA0BD,EAAMpC,SAASC,KAAKmC,WAwB9CE,EAAiB,SAACjD,GACtB,OAAOuB,EAAQ2B,MAAK,SAAC5C,GAAD,OAAYA,EAAON,KAAOA,MAG1CmD,EAAe,WACnB,IAAMC,EAAYC,EAAiB1B,GAC7B2B,EAAS,2BACVF,GADU,IAEbrD,OAAQ8B,IAGVO,EACUkB,EAAUtD,GAAIsD,GACrB5C,MAAK,SAAC6C,GACL/B,EACED,EAAQlB,KAAI,SAACC,GAAD,OACVA,EAAON,KAAOuD,EAAcvD,GAAKM,EAASiD,MAG9CC,OAEDV,OAAM,SAACC,GACNU,EAA0BH,EAAUxD,MACpC4D,EAAkBJ,EAAUxD,UAI5B4D,EAAoB,SAAC1D,GACzBwB,EAAWD,EAAQQ,QAAO,SAACzB,GAAD,OAAYA,EAAON,KAAOA,OAGhD2D,EAAe,WACnBC,YAAW,kBAAM3B,EAAW,QAAO,MAG/BY,EAA0B,WAC9BZ,EAAW,qBAAD,OAAsBN,IAChCO,EAAoB,WACpByB,KAGIH,EAA0B,WAC9BvB,EAAW,wBAAD,OAAyBN,IACnCO,EAAoB,WACpByB,KAGIE,EAA0B,SAAC/D,GAC/BmC,EAAW,wBAAD,OAAyBnC,IACnCoC,EAAoB,WACpByB,KAGIX,EAA4B,SAAC9B,GACjCe,EAAW,GAAD,OAAIf,IACdgB,EAAoB,SACpByB,KAGIF,EAA4B,SAAC3D,GACjCmC,EAAW,kBAAD,OAAmBnC,IAC7BoC,EAAoB,SACpByB,KAGIG,EAA4B,SAAChE,GACjCmC,EAAW,GAAD,OAAInC,EAAJ,8CACVoC,EAAoB,SACpByB,KAGIN,EAAmB,SAACvD,GACxB,OAAOyB,EAAQ2B,MACb,SAAC5C,GAAD,OAAYA,EAAOR,KAAK0C,gBAAkB1C,EAAK0C,kBAI7CuB,GAAa,WACjBnC,EAAW,IACXE,EAAa,KAGTkC,GAAc,WAClBhC,EAAU,IACVN,EAAW,KAGPuC,GAAiB,SAACnE,GACtB,OAA6D,IAAzDyB,EAAQ2C,WAAU,SAAC5D,GAAD,OAAYA,EAAOR,OAASA,MAMpD,OACE,gCACE,2CACA,cAAC,EAAD,CAAcoB,QAASA,EAASC,iBAAkBA,IAClD,cAAC,EAAD,CACEjC,MAAO6C,EACP5C,SAhLqB,SAACgF,GAC1B,IAAI7B,EAAW6B,EAAMC,OAAOlF,MAC5B8C,EAAUM,GACVD,EAAcC,IA8KVlD,OAAQ4E,KAEV,kDACA,cAAC,EAAD,CACEzE,SArKe,SAAC4E,GAGpB,OAFAA,EAAME,iBAEU,KAAZ1C,EACK2C,MAAM,oBAEXL,GAAetC,GAEf4C,OAAOC,QAAP,UACK7C,EADL,0EAIAwB,SACAY,WAGFA,MAGFrB,SACAqB,OAkJIvE,UAAWmC,EACXlC,aAhMmB,SAAC0E,GACxBH,KACApC,EAAWuC,EAAMC,OAAOlF,QA+LpBQ,YAAamC,EACblC,eA7LqB,SAACwE,GAC1BrC,EAAaqC,EAAMC,OAAOlF,UA8LxB,yCACA,cAAC,EAAD,CACEkB,aAAyB,KAAX2B,EAAgBR,EAAUE,EACxCxB,SAtIe,SAACD,GAAD,OAAQ,WAC3B,IAAIyE,EAAgBxB,EAAejD,GAEjCuE,OAAOC,QAAP,0CAAkDC,EAAc3E,QAEhEsC,EACUpC,GACPU,MAAK,WACJc,EACED,EAAQQ,QAAO,SAACzB,GAAD,OAAYA,EAAOR,OAAS2E,EAAc3E,SAE3D+D,EAAwBY,EAAc3E,SAEvCgD,OAAM,SAACC,GACNe,EAA0BW,EAAc3E,MACxC4D,EAAkB1D,cChG5B0E,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.d2b64dac.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, onChange, onBlur }) => {\n  return (\n    <div>\n      filter starts with\n      <input value={value} onChange={onChange} onBlur={onBlur} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n  const { onSubmit, nameValue, nameOnChange, numberValue, numberOnChange } = {\n    ...props,\n  };\n\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={nameValue} onChange={nameOnChange} />\n      </div>\n      <div>\n        number: <input value={numberValue} onChange={numberOnChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ name, number, id, onDelete }) => {\n  return (\n    <div>\n      {name} {number} <button onClick={onDelete(id)}>delete</button>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst PersonsList = ({ personsArray, onDelete }) => {\n  return (\n    <div>\n      {personsArray.map((person) => (\n        <Person\n          name={person.name}\n          number={person.number}\n          key={person.name}\n          id={person.id}\n          onDelete={onDelete}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default PersonsList;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n};\n","import React from \"react\";\n\nconst Notification = ({ message, notificationType }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className={notificationType}>\n        {message}\n      </div>\n    )\n}\n\nexport default Notification;\n\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport PersonForm from \"./PersonForm\";\nimport PersonsList from \"./PersonsList\";\nimport personService from \"./services/persons\";\nimport Notification from \"./Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [results, setResults] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState(\"\");\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    clearFilter();\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    let searched = event.target.value;\n    setFilter(searched);\n    filterPersons(searched);\n  };\n\n  const filterPersons = (searched) => {\n    setResults(filterPersonsByName(searched));\n  };\n\n  const filterPersonsByName = (name) => {\n    return persons.filter((person) =>\n      person.name.toLowerCase().includes(name.toLowerCase())\n    );\n  };\n\n  const addNewPerson = (event) => {\n    event.preventDefault();\n\n    if (newName === \"\") {\n      return alert(\"Not a valid name\");\n    }\n    if (isNameRepeated(newName)) {\n      if (\n        window.confirm(\n          `${newName} is already on the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        updatePerson();\n        clearInput();\n        return;\n      }\n      clearInput();\n      return;\n    }\n    createPerson();\n    clearInput();\n  };\n\n  const createPerson = () => {\n    const person = {\n      name: newName,\n      number: newNumber,\n    };\n\n    personService\n      .create(person)\n      .then((createdPerson) => {\n        setPersons(persons.concat(createdPerson));\n        successfulCreateMessage();\n      })\n      .catch((error) => {\n        unsuccessfulCreateMessage(error.response.data.error);\n      });\n  };\n\n  const removePerson = (id) => () => {\n    let removedPerson = findPersonById(id);\n    if (\n      window.confirm(`Are you sure you want to delete ${removedPerson.name}`)\n    ) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(\n            persons.filter((person) => person.name !== removedPerson.name)\n          );\n          successfulRemoveMessage(removedPerson.name);\n        })\n        .catch((error) => {\n          unsuccessfulRemoveMessage(removedPerson.name);\n          updateLocalMemory(id);\n        });\n    }\n  };\n\n  const findPersonById = (id) => {\n    return persons.find((person) => person.id === id);\n  };\n\n  const updatePerson = () => {\n    const oldPerson = findPersonByName(newName);\n    const newPerson = {\n      ...oldPerson,\n      number: newNumber,\n    };\n\n    personService\n      .update(newPerson.id, newPerson)\n      .then((updatedPerson) => {\n        setPersons(\n          persons.map((person) =>\n            person.id !== updatedPerson.id ? person : updatedPerson\n          )\n        );\n        successfulUpdateMessage();\n      })\n      .catch((error) => {\n        unsuccessfulUpdateMessage(newPerson.name);\n        updateLocalMemory(newPerson.name);\n      });\n  };\n\n  const updateLocalMemory = (id) => {\n    setPersons(persons.filter((person) => person.id !== id));\n  };\n\n  const resetMessage = () => {\n    setTimeout(() => setMessage(null), 5000);\n  };\n\n  const successfulCreateMessage = () => {\n    setMessage(`New person added: ${newName}`);\n    setNotificationType(\"success\");\n    resetMessage();\n  };\n\n  const successfulUpdateMessage = () => {\n    setMessage(`Successfully updated ${newName}`);\n    setNotificationType(\"success\");\n    resetMessage();\n  };\n\n  const successfulRemoveMessage = (name) => {\n    setMessage(`Successfully removed ${name}`);\n    setNotificationType(\"success\");\n    resetMessage();\n  };\n\n  const unsuccessfulCreateMessage = (message) => {\n    setMessage(`${message}`);\n    setNotificationType(\"error\");\n    resetMessage();\n  };\n\n  const unsuccessfulUpdateMessage = (name) => {\n    setMessage(`Error updating ${name}`);\n    setNotificationType(\"error\");\n    resetMessage();\n  };\n\n  const unsuccessfulRemoveMessage = (name) => {\n    setMessage(`${name} has been already removed from the server`);\n    setNotificationType(\"error\");\n    resetMessage();\n  };\n\n  const findPersonByName = (name) => {\n    return persons.find(\n      (person) => person.name.toLowerCase() === name.toLowerCase()\n    );\n  };\n\n  const clearInput = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const clearFilter = () => {\n    setFilter(\"\");\n    setResults([]);\n  };\n\n  const isNameRepeated = (name) => {\n    if (persons.findIndex((person) => person.name === name) !== -1) {\n      return true;\n    }\n    return false;\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} notificationType={notificationType} />\n      <Filter\n        value={filter}\n        onChange={handleFilterChange}\n        onBlur={clearFilter}\n      />\n      <h3>add a new person</h3>\n      <PersonForm\n        onSubmit={addNewPerson}\n        nameValue={newName}\n        nameOnChange={handleNameChange}\n        numberValue={newNumber}\n        numberOnChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <PersonsList\n        personsArray={filter === \"\" ? persons : results}\n        onDelete={removePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\"\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}